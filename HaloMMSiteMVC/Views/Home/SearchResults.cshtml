@model HaloMMSiteMVC.Models.Player
@{
    ViewBag.Title = "Search Results";
    Layout = "~/Views/Shared/_Layout.cshtml";
    string p1Emb = "http://halo.bungie.net/" + Model.EmblemURL;
    string p2Emb = "http://halo.bungie.net/" + Model.EnemyEmblemURL;
}



@*if there's no error text in the ViewBag, don't display error box*@
@if (ViewBag.Error != "")
{
    <div class="errortext">@ViewBag.Error</div>
    <br />
}

@using (@Html.BeginForm("SearchResults", "Home", FormMethod.Post))
{
    <div class="info-text">
        <h5><u>Search Times</u></h5>
        The first time searching a particular Gamertag can take up to ~5 minutes. After the first search the Gamertag will be added to the database
        and subsequent searches with be much faster (under 10 seconds in most cases).

        <br />
        <h5><u>Requirements</u></h5>
        - You need to use the <b>current</b> Gamertag of the Xbox Live accounts you're trying to search.<br />
        - Games played after 03/31/2012 aren't available. Bungie did not record Halo 3 games played after this date. <br />
        - Search is not case sensitive. <br />
        <br />

        @*Already Pointchecked your friends? Try searching against these random players.*@
    </div>

    <div class="Icon">
        <img src="~/Content/information.png" width="20" height="20" />
    </div>
    <div class="daForm">
        <form action="SearchResults" method="post">

            Gamertag 1<br>

            <input type="text" name="gt1"><br><br>

            Gamertag 2<br>

            <input type="text" name="gt2"><br><br>

            <label>Matchmaking</label>

            @Html.CheckBox("mmCheckBox") <br />

            <label>Custom Games</label>

            @Html.CheckBox("cusCheckBox") <br />

            <input type="submit" value="Search">
        </form>
    </div>
}

@if (Model.Name != null)
{
    <div class="p1Emb">

        <img src="@p1Emb" width="50" height="50" />
        @Model.Name
    </div>
    <div class="gameCount">
        @Model.GameList.Count games played
    </div>
    <div class="p2Emb">
        @Model.EnemyName
        <img src="@p2Emb" width="50" height="50" />

    </div>
    <div class="resultsTable">
        <table>



            <tr>


                <th>
                    Date
                </th>
                <th>
                    Link
                </th>
                <th>
                    Map
                </th>
                <th>
                    Gametype
                </th>
                <th>
                    Playlist
                </th>
            </tr>


            @foreach (var item in Model.GameList)
            {
                string gID = item.GameID.ToString();
                <tr>
                    <td>
                        @Html.DisplayFor(Model => item.Date)
                    </td>
                    <td>
                        <a href='https://halo.bungie.net/Stats/GameStatsHalo3.aspx?gameid=@gID' target="_blank">Link</a>
                    </td>
                    <td>
                        @Html.DisplayFor(Model => item.Map)
                    </td>
                    <td>
                        @Html.DisplayFor(Model => item.Gametype)
                    </td>
                    <td>
                        @Html.DisplayFor(Model => item.Playlist)
                    </td>
                </tr>
            }
        </table>
    </div>
}
